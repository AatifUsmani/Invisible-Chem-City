.map-view {
  width: 100%;
  height: 100%;
  min-height: 70vh;
  position: relative;
  overflow: hidden;
}

#custom-facility-popup {
  /* Positioning: Locked to center */
  position: absolute !important;
  left: 50% !important;
  top: 50% !important;
  transform: translate(-50%, -50%) !important;
  
  /* Visuals: Brighter & High Contrast */
  width: 560px;
  max-width: 92vw; /* Mobile optimization */
  max-height: 80vh;
  background: #1c1c1f !important; /* Solid, brighter dark gray */
  color: #f4f4f5 !important;
  border: 1px solid rgba(255, 255, 255, 0.15); /* Brighter border */
  border-radius: 12px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.7), 0 0 15px rgba(255, 255, 255, 0.05); /* Outer glow */
  
  z-index: 999999 !important; /* Force to the very front */
  overflow-y: auto;
  pointer-events: auto;
  
  /* The Animation: Controlled here only */
  animation: popupReveal 0.3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes popupReveal {
  from { 
    opacity: 0; 
    transform: translate(-50%, -45%) scale(0.92); 
  }
  to { 
    opacity: 1; 
    transform: translate(-50%, -50%) scale(1); 
  }
}

/* Mobile Adjustments */
@media (max-width: 640px) {
  #custom-facility-popup {
    width: 95vw;
    top: auto !important;
    bottom: 20px !important;
    transform: translate(-50%, 0) !important;
  }
  
  @keyframes popupReveal {
    from { opacity: 0; transform: translate(-50%, 20px); }
    to { opacity: 1; transform: translate(-50%, 0); }
  }
}

.custom-popup-content {
  padding: 20px;
}